@using Radzen
@using Radzen.Blazor

@inject DialogService DialogService

<RadzenTemplateForm TItem="object">
    <div style="display: flex; flex-direction: column; max-height: 90vh; overflow: hidden;">
        @* HEADER *@
        <div style="flex: 0 0 auto; padding: 20px; border-bottom: 2px solid #1976d2; background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);">
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.SpaceBetween">
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="12px">
                    <RadzenIcon Icon="help" Style="font-size: 32px; color: white;" />
                    <RadzenLabel Text="H∆∞·ªõng d·∫´n: G√°n Role cho Button" Style="font-size: 24px; font-weight: bold; color: white;" />
                </RadzenStack>
                <RadzenButton Icon="close" 
                             ButtonStyle="ButtonStyle.Light" 
                             Variant="Variant.Flat"
                             Click="@CloseDialog"
                             Style="color: white; border-color: white;" />
            </RadzenStack>
        </div>

        @* BODY: Scrollable content *@
        <div style="flex: 1 1 auto; overflow-y: auto; padding: 20px;">
            <RadzenStack Gap="20px">
                @* Gi·ªõi thi·ªáu *@
                <RadzenCard>
                    <RadzenStack Gap="12px">
                        <RadzenText TextStyle="TextStyle.H3" Text="üìå T·ªïng quan" Style="color: #1976d2; font-weight: bold;" />
                        <RadzenText Text="Ch·ª©c nƒÉng n√†y cho ph√©p Admin g√°n quy·ªÅn truy c·∫≠p cho t·ª´ng button tr√™n trang web. Khi g√°n role cho m·ªôt button, ch·ªâ nh·ªØng user c√≥ role ƒë√≥ m·ªõi th·∫•y v√† s·ª≠ d·ª•ng ƒë∆∞·ª£c button ƒë√≥." 
                                   Style="font-size: 14px; line-height: 1.6;" />
                    </RadzenStack>
                </RadzenCard>

                @* B∆∞·ªõc 1: B·∫≠t ch·∫ø ƒë·ªô *@
                <RadzenCard>
                    <RadzenStack Gap="12px">
                        <RadzenText TextStyle="TextStyle.H4" Text="B∆∞·ªõc 1: B·∫≠t ch·∫ø ƒë·ªô ƒëi·ªÅu ch·ªânh ph√¢n quy·ªÅn" Style="color: #1976d2; font-weight: bold;" />
                        <RadzenStack Gap="8px" Style="padding-left: 20px;">
                            <RadzenText Text="1. Click v√†o t√™n account c·ªßa b·∫°n (v√≠ d·ª•: 'Admin 001') tr√™n header" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenText Text="2. M·ªôt dropdown menu s·∫Ω hi·ªán ra v·ªõi switch 'B·∫≠t ch·∫ø ƒë·ªô ƒëi·ªÅu ch·ªânh ph√¢n quy·ªÅn'" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenText Text="3. B·∫≠t switch n√†y l√™n" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenText Text="4. Sau khi b·∫≠t, c√°c button tr√™n trang s·∫Ω hi·ªán icon üîß m√†u cam ·ªü g√≥c tr√™n b√™n ph·∫£i" Style="font-size: 14px; line-height: 1.6; font-weight: 600; color: #ff9800;" />
                        </RadzenStack>
                    </RadzenStack>
                </RadzenCard>

                @* B∆∞·ªõc 2: G√°n role *@
                <RadzenCard>
                    <RadzenStack Gap="12px">
                        <RadzenText TextStyle="TextStyle.H4" Text="B∆∞·ªõc 2: G√°n Role cho Button" Style="color: #1976d2; font-weight: bold;" />
                        <RadzenStack Gap="8px" Style="padding-left: 20px;">
                            <RadzenText Text="C√≥ 2 c√°ch ƒë·ªÉ m·ªü dialog g√°n role:" Style="font-size: 14px; line-height: 1.6; font-weight: 600;" />
                            <RadzenText Text="‚Ä¢ C√°ch 1: Click v√†o icon üîß tr√™n button" Style="font-size: 14px; line-height: 1.6; padding-left: 10px;" />
                            <RadzenText Text="‚Ä¢ C√°ch 2: Chu·ªôt ph·∫£i v√†o button" Style="font-size: 14px; line-height: 1.6; padding-left: 10px;" />
                            <RadzenText Text="Dialog 'G√°n Role cho Button' s·∫Ω hi·ªán ra v·ªõi c√°c th√¥ng tin:" Style="font-size: 14px; line-height: 1.6; margin-top: 8px;" />
                            <RadzenStack Gap="4px" Style="padding-left: 20px;">
                                <RadzenText Text="‚Ä¢ Button ID: M√£ ƒë·ªãnh danh c·ªßa button (v√≠ d·ª•: SanPham_Create_Button)" Style="font-size: 14px; line-height: 1.6;" />
                                <RadzenText Text="‚Ä¢ Trang: ƒê∆∞·ªùng d·∫´n trang hi·ªán t·∫°i" Style="font-size: 14px; line-height: 1.6;" />
                                <RadzenText Text="‚Ä¢ T√™n Button: T√™n hi·ªÉn th·ªã c·ªßa button" Style="font-size: 14px; line-height: 1.6;" />
                                <RadzenText Text="‚Ä¢ Ch·ªçn Roles: Dropdown ƒë·ªÉ ch·ªçn c√°c role ƒë∆∞·ª£c ph√©p s·ª≠ d·ª•ng button n√†y" Style="font-size: 14px; line-height: 1.6;" />
                            </RadzenStack>
                        </RadzenStack>
                    </RadzenStack>
                </RadzenCard>

                @* B∆∞·ªõc 3: Ch·ªçn roles *@
                <RadzenCard>
                    <RadzenStack Gap="12px">
                        <RadzenText TextStyle="TextStyle.H4" Text="B∆∞·ªõc 3: Ch·ªçn Roles v√† L∆∞u" Style="color: #1976d2; font-weight: bold;" />
                        <RadzenStack Gap="8px" Style="padding-left: 20px;">
                            <RadzenText Text="1. Trong dropdown 'Ch·ªçn Roles', ch·ªçn m·ªôt ho·∫∑c nhi·ªÅu role m√† b·∫°n mu·ªën cho ph√©p s·ª≠ d·ª•ng button n√†y" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenText Text="2. B·∫°n c√≥ th·ªÉ search role b·∫±ng c√°ch g√µ v√†o √¥ dropdown" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenText Text="3. L∆∞u √Ω: Role 'Admin' lu√¥n ƒë∆∞·ª£c g√°n m·∫∑c ƒë·ªãnh v√† kh√¥ng th·ªÉ b·ªè ch·ªçn" Style="font-size: 14px; line-height: 1.6; font-weight: 600; color: #d32f2f;" />
                            <RadzenText Text="4. Click n√∫t 'L∆∞u' ƒë·ªÉ ho√†n t·∫•t" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenText Text="5. Sau khi l∆∞u, ch·ªâ nh·ªØng user c√≥ √≠t nh·∫•t 1 trong c√°c role ƒë∆∞·ª£c ch·ªçn m·ªõi th·∫•y button ƒë√≥" Style="font-size: 14px; line-height: 1.6; font-weight: 600; color: #388e3c;" />
                        </RadzenStack>
                    </RadzenStack>
                </RadzenCard>

                @* L∆∞u √Ω *@
                <RadzenCard Style="background-color: #fff3cd; border-left: 4px solid #ffc107;">
                    <RadzenStack Gap="12px">
                        <RadzenText TextStyle="TextStyle.H4" Text="‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng" Style="color: #856404; font-weight: bold;" />
                        <RadzenStack Gap="8px" Style="padding-left: 20px;">
                            <RadzenText Text="‚Ä¢ N·∫øu m·ªôt button ch∆∞a ƒë∆∞·ª£c g√°n role n√†o, ch·ªâ Admin m·ªõi th·∫•y button ƒë√≥ (m·∫∑c ƒë·ªãnh an to√†n)" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenText Text="‚Ä¢ C√°c button c√πng ButtonId (v√≠ d·ª•: nhi·ªÅu button 'Th√™m/S·ª≠a' trong DataGrid) s·∫Ω d√πng chung c·∫•u h√¨nh ph√¢n quy·ªÅn" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenText Text="‚Ä¢ Khi x√≥a ho·∫∑c ƒë·ªïi t√™n m·ªôt role, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông c·∫≠p nh·∫≠t c√°c button ƒëang s·ª≠ d·ª•ng role ƒë√≥" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenText Text="‚Ä¢ Ch·ªâ Admin m·ªõi c√≥ th·ªÉ b·∫≠t ch·∫ø ƒë·ªô ƒëi·ªÅu ch·ªânh ph√¢n quy·ªÅn v√† g√°n role cho button" Style="font-size: 14px; line-height: 1.6; font-weight: 600;" />
                        </RadzenStack>
                    </RadzenStack>
                </RadzenCard>

                @* V√≠ d·ª• *@
                <RadzenCard>
                    <RadzenStack Gap="12px">
                        <RadzenText TextStyle="TextStyle.H4" Text="üí° V√≠ d·ª•" Style="color: #1976d2; font-weight: bold;" />
                        <RadzenStack Gap="8px" Style="padding-left: 20px;">
                            <RadzenText Text="B·∫°n mu·ªën ch·ªâ role 'User' v√† 'Manager' m·ªõi th·∫•y button 'Th√™m s·∫£n ph·∫©m m·ªõi':" Style="font-size: 14px; line-height: 1.6;" />
                            <RadzenStack Gap="4px" Style="padding-left: 20px;">
                                <RadzenText Text="1. B·∫≠t ch·∫ø ƒë·ªô ƒëi·ªÅu ch·ªânh ph√¢n quy·ªÅn" Style="font-size: 14px; line-height: 1.6;" />
                                <RadzenText Text="2. Click icon üîß tr√™n button 'Th√™m s·∫£n ph·∫©m m·ªõi'" Style="font-size: 14px; line-height: 1.6;" />
                                <RadzenText Text="3. Trong dropdown, ch·ªçn 'User' v√† 'Manager' (Admin ƒë√£ t·ª± ƒë·ªông ƒë∆∞·ª£c ch·ªçn)" Style="font-size: 14px; line-height: 1.6;" />
                                <RadzenText Text="4. Click 'L∆∞u'" Style="font-size: 14px; line-height: 1.6;" />
                                <RadzenText Text="5. B√¢y gi·ªù ch·ªâ user c√≥ role 'User', 'Manager', ho·∫∑c 'Admin' m·ªõi th·∫•y button n√†y" Style="font-size: 14px; line-height: 1.6; font-weight: 600; color: #388e3c;" />
                            </RadzenStack>
                        </RadzenStack>
                    </RadzenStack>
                </RadzenCard>
            </RadzenStack>
        </div>

        @* FOOTER *@
        <div style="flex: 0 0 auto; padding: 15px 20px; border-top: 1px solid #e0e0e0; background-color: #f5f5f5;">
            <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.End">
                <RadzenButton Text="ƒê√≥ng" 
                             Icon="close" 
                             ButtonStyle="ButtonStyle.Primary"
                             Click="@CloseDialog" />
            </RadzenStack>
        </div>
    </div>
</RadzenTemplateForm>

@code {
    private void CloseDialog()
    {
        DialogService.Close(true);
    }
}

